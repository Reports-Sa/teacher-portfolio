<!DOCTYPE html>
<html lang="ar" dir="rtl" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ù„Ù Ø§Ù„Ø¥Ù†Ø¬Ø§Ø² Ø§Ù„Ù…Ù‡Ù†ÙŠ</title>
    <meta name="description" content="Ù…Ù„Ù Ø¥Ù†Ø¬Ø§Ø² ØªÙØ§Ø¹Ù„ÙŠ ÙŠØ¹Ø±Ø¶ Ø§Ù„Ù…Ø³ÙŠØ±Ø© Ø§Ù„Ù…Ù‡Ù†ÙŠØ© ÙˆØ§Ù„Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ù„Ù„Ù…Ø¹Ù„Ù…Ø©.">
    
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22> portfolio </text></svg>">
    
    <!-- External Libraries (CSS and JS) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.3/css/lightbox.min.css" rel="stylesheet">
    
    <!-- IMPORTANT: AlpineJS Plugins MUST be loaded BEFORE AlpineJS Core -->
    <script defer src="https://cdn.jsdelivr.net/npm/@alpinejs/persist@3.x.x/dist/cdn.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    
    <!-- Other Libraries that don't depend on Alpine -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.3/js/lightbox.min.js"></script>
    
    <!-- Custom CSS -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap');
        body { font-family: 'Tajawal', sans-serif; transition: background-color 0.3s, color 0.3s; }
        [x-cloak] { display: none !important; }
        @media print {
            body { -webkit-print-color-adjust: exact; print-color-adjust: exact; }
            .no-print, .no-print * { display: none !important; }
            section { page-break-inside: avoid; }
            main, section, div, p { background: transparent !important; color: #000 !important; }
        }
        .dark { background-color: #111827; color: #f3f4f6; }
        .fab { position: fixed; bottom: 2rem; right: 2rem; z-index: 50; }
        [dir="rtl"] .fab { right: auto; left: 2rem; }
    </style>

    <!-- =================================================================== -->
    <!-- THE CORRECT AND FINAL JAVASCRIPT IMPLEMENTATION using Alpine.data -->
    <!-- =================================================================== -->
    <script>
        document.addEventListener('alpine:init', () => {
            Alpine.data('portfolioApp', () => ({
                // --- STATE MANAGEMENT ---
                lang: 'ar',
                darkMode: Alpine.$persist(window.matchMedia('(prefers-color-scheme: dark)').matches).as('portfolio-dark-mode'),
                isLoading: true,
                loadingError: null,
                isAuthenticated: false,
                isEditing: false,
                isSaving: false,
                showLoginModal: false,
                showFallbackBanner: false,
                passwordInput: '',
                loginError: '',

                // --- DATA ---
                data: { profile: { fullName: "..." } }, // Default structure to prevent errors on load
                originalData: {},
                filesToUpload: {},

                // --- I18N (Internationalization) ---
                i18n: {
                    ar: { loading: "Ø¬Ø§Ø± Ø§Ù„ØªØ­Ù…ÙŠÙ„...", login: "ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„", logout: "ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬", password: "ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±", loginAction: "Ø¯Ø®ÙˆÙ„", save: "Ø­ÙØ¸ ÙˆÙ†Ø´Ø±", saving: "Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­ÙØ¸...", cancel: "Ø¥Ù„ØºØ§Ø¡", unsavedChanges: "Ø£Ù†Øª ÙÙŠ ÙˆØ¶Ø¹ Ø§Ù„ØªØ­Ø±ÙŠØ±. Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª ØºÙŠØ± Ù…Ø­ÙÙˆØ¸Ø©.", fallbackSave: "Ù„Ù… ÙŠØªÙ… Ø§Ù„Ù†Ø´Ø±. ØªÙ… Ø­ÙØ¸ Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© ÙÙŠ Ù…ØªØµÙØ­Ùƒ.", saveSuccess: "ØªÙ… Ø§Ù„Ø­ÙØ¸ Ø¨Ù†Ø¬Ø§Ø­! Ø³ÙŠØ¸Ù‡Ø± Ø§Ù„ØªØ­Ø¯ÙŠØ« Ù„Ù„Ø¬Ù…ÙŠØ¹ Ø®Ù„Ø§Ù„ Ù„Ø­Ø¸Ø§Øª.", saveError: "Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø­ÙØ¸. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.", school: "Ø§Ù„Ù…Ø¯Ø±Ø³Ø©", nationality: "Ø§Ù„Ø¬Ù†Ø³ÙŠØ©", schoolYear: "Ø§Ù„Ø¹Ø§Ù… Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ" },
                    en: { loading: "Loading...", login: "Login", logout: "Logout", password: "Password", loginAction: "Enter", save: "Save & Publish", saving: "Saving...", cancel: "Cancel", unsavedChanges: "You are in edit mode. Changes are not saved.", fallbackSave: "Could not publish. A backup was saved in your browser.", saveSuccess: "Saved successfully! The update will be live shortly.", saveError: "An error occurred while saving. Please try again.", school: "School", nationality: "Nationality", schoolYear: "School Year" }
                },

                // --- METHODS ---
                init() {
                    this.fetchData();
                    AOS.init({ once: true, duration: 600 });
                },

                fetchData() {
                    this.isLoading = true;
                    this.loadingError = null;
                    fetch(`./data.json?v=${new Date().getTime()}`)
                        .then(response => {
                            if (!response.ok) throw new Error(`ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ data.json: ${response.status} ${response.statusText}`);
                            return response.json();
                        })
                        .then(jsonData => {
                            this.data = jsonData;
                            this.originalData = JSON.parse(JSON.stringify(jsonData));
                            document.title = this.data.profile.fullName || "Ù…Ù„Ù Ø§Ù„Ø¥Ù†Ø¬Ø§Ø² Ø§Ù„Ù…Ù‡Ù†ÙŠ";
                        })
                        .catch(error => {
                            console.error('Fetch Data Error:', error);
                            this.loadingError = error.message;
                        })
                        .finally(() => {
                            this.isLoading = false;
                        });
                },
                
                // You can add all your other methods here like saveChanges, login, etc.
                // For brevity, I will add a few key ones.
                toggleLang() { 
                    this.lang = this.lang === 'ar' ? 'en' : 'ar';
                    document.documentElement.dir = this.lang === 'ar' ? 'rtl' : 'ltr';
                },

                toggleDarkMode() { this.darkMode = !this.darkMode; },

            }));
        });
    </script>
</head>

<!-- Notice the :class and :dir attributes now use the correct properties -->
<body x-data="portfolioApp" x-cloak :class="{ 'dark': darkMode }" :dir="lang">
    
    <!-- Top Bar -->
    <header class="no-print sticky top-0 z-40 bg-white/80 dark:bg-gray-900/80 backdrop-blur-sm shadow-sm">
        <div class="container mx-auto px-4 py-2 flex justify-between items-center">
             <h1 class="text-xl font-bold text-gray-800 dark:text-gray-200" x-text="data.profile.fullName"></h1>
             <div class="flex items-center space-x-2 rtl:space-x-reverse">
                 <button @click="toggleDarkMode()" class="p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700">
                     <span x-show="!darkMode">ğŸŒ™</span><span x-show="darkMode">â˜€ï¸</span>
                 </button>
                 <button @click="toggleLang()" class="p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700">
                     <span x-text="lang === 'ar' ? 'EN' : 'AR'"></span>
                 </button>
             </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="flex-1 p-4 md:p-8 lg:p-12">
        
        <!-- Loading Indicator -->
        <div x-show="isLoading" class="text-center p-12 text-gray-500" x-text="i18n[lang].loading"></div>

        <!-- Data Loading Error Message -->
        <div x-show="loadingError" class="m-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded-lg">
            <h3 class="font-bold">Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</h3>
            <p class="mt-2" x-text="loadingError"></p>
            <p class="mt-4 text-sm">ØªØ£ÙƒØ¯ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ù…Ù„Ù `data.json` ÙÙŠ Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹ØŒ ÙˆØ£Ù†Ù‡ Ù„Ø§ ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø£Ø®Ø·Ø§Ø¡ØŒ ÙˆØ£Ù† Ù…Ø³Ø§Ø±Ù‡ ØµØ­ÙŠØ­.</p>
        </div>

        <!-- The Actual Portfolio Content -->
        <div x-show="!isLoading && !loadingError" class="space-y-16">
            <h2 class="text-4xl font-bold">Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ù…Ù„Ù Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²!</h2>
            <p>Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ØªÙ… ØªØ­Ù…ÙŠÙ„Ù‡Ø§ Ø¨Ù†Ø¬Ø§Ø­.</p>
            <p>Ø§Ø³Ù… Ø§Ù„Ù…Ø¹Ù„Ù…Ø©: <span x-text="data.profile.fullName"></span></p>
            <!-- All your other portfolio sections go here -->
        </div>
    </main>

</body>
</html>