<!DOCTYPE html>
<html lang="ar" dir="rtl" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ù„Ù Ø§Ù„Ø¥Ù†Ø¬Ø§Ø² Ø§Ù„Ù…Ù‡Ù†ÙŠ</title>
    
    <!-- Libraries -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/@alpinejs/persist@3.x.x/dist/cdn.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css" rel="stylesheet">
    
    <!-- Custom Styles -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap');
        body { font-family: 'Tajawal', sans-serif; background-color: #f9fafb; color: #1f2937; }
        [x-cloak] { display: none !important; }
        .dark { background-color: #111827; color: #f3f4f6; }
        .dark .bg-white { background-color: #1f2937; }
        .dark .bg-gray-50 { background-color: #1f2937; }
        .dark .bg-gray-100 { background-color: #374151; }
        .dark .text-gray-800 { color: #f9fafb; }
        .dark .text-gray-600 { color: #d1d5db; }
        .dark .shadow-sm { box-shadow: 0 1px 2px 0 rgba(255, 255, 255, 0.05); }
        .dark .border-gray-200 { border-color: #374151; }
    </style>

    <!-- Final & Correct JavaScript Logic -->
    <script>
        document.addEventListener('alpine:init', () => {
            Alpine.data('portfolioApp', () => ({
                // State
                darkMode: Alpine.$persist(false).as('portfolio-dark-mode'),
                lang: 'ar',
                isLoading: true,
                loadingError: null,
                data: { profile: {} }, // Start with empty profile

                // Methods
                init() {
                    this.fetchData();
                    AOS.init({ once: true, duration: 800 });
                },

                fetchData() {
                    this.isLoading = true;
                    fetch('./data.json?v=' + new Date().getTime())
                        .then(res => {
                            if (!res.ok) throw new Error('Could not fetch data.json');
                            return res.json();
                        })
                        .then(jsonData => {
                            this.data = jsonData;
                            document.title = `Ù…Ù„Ù Ø§Ù„Ø¥Ù†Ø¬Ø§Ø² | ${this.data.profile.fullName}`;
                        })
                        .catch(err => this.loadingError = err.toString())
                        .finally(() => this.isLoading = false);
                },

                toggleDarkMode() { this.darkMode = !this.darkMode; },
                toggleLang() {
                    this.lang = (this.lang === 'ar') ? 'en' : 'ar';
                    document.documentElement.lang = this.lang;
                    document.documentElement.dir = this.lang;
                }
            }));
        });
    </script>
</head>

<body x-data="portfolioApp" x-cloak :class="{ 'dark': darkMode }" :dir="lang">
    
    <!-- Loading Screen -->
    <div x-show="isLoading" class="fixed inset-0 bg-white dark:bg-gray-900 flex items-center justify-center z-50">
        <p class="text-xl">Ø¬Ø§Ø± ØªØ­Ù…ÙŠÙ„ Ù…Ù„Ù Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²...</p>
    </div>

    <!-- Error Screen -->
     <div x-show="loadingError" class="fixed inset-0 bg-red-50 flex items-center justify-center z-50 p-8">
        <div class="text-center text-red-700">
             <h2 class="text-2xl font-bold">Ø­Ø¯Ø« Ø®Ø·Ø£</h2>
             <p class="mt-2">Ù„Ù… ÙŠØªÙ…ÙƒÙ† Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ù…Ù† ØªØ­Ù…ÙŠÙ„ Ù…Ù„Ù Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª `data.json`.</p>
             <p class="mt-1 text-sm">ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø®Ø·Ø£: <span x-text="loadingError"></span></p>
        </div>
    </div>

    <!-- Main Content (shows after loading is complete and successful) -->
    <div x-show="!isLoading && !loadingError">
        <!-- Header Section -->
        <header class="bg-white dark:bg-gray-800 shadow-md p-6 md:p-8">
            <div class="container mx-auto grid grid-cols-1 md:grid-cols-3 gap-6 items-center">
                <div class="flex justify-center md:justify-start">
                    <img :src="data.profile.photo" :alt="data.profile.fullName" class="w-40 h-40 rounded-full object-cover border-4 border-green-500 shadow-lg">
                </div>
                <div class="text-center md:col-span-2 md:text-right">
                    <h1 class="text-4xl font-extrabold text-gray-800" x-text="data.profile.fullName"></h1>
                    <p class="text-lg text-green-600 dark:text-green-400 mt-1" x-text="`${data.profile.title} | ${data.profile.grade}`"></p>
                    <div class="mt-4 text-sm text-gray-600 dark:text-gray-400 space-y-1">
                        <p><strong>Ø§Ù„Ù…Ø¯Ø±Ø³Ø©:</strong> <span x-text="data.profile.school"></span> (<span x-text="data.profile.administration"></span>)</p>
                        <p><strong>Ø§Ù„Ø¬Ù†Ø³ÙŠØ©:</strong> <span x-text="data.profile.nationality"></span></p>
                        <p><strong>Ø§Ù„Ø¹Ø§Ù… Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ:</strong> <span x-text="`${data.profile.schoolYear.gregorian} / ${data.profile.schoolYear.hijri}`"></span></p>
                    </div>
                </div>
            </div>
            <div class="absolute top-4 right-4">
                 <button @click="toggleDarkMode()">
                     <span x-show="!darkMode">ğŸŒ™</span><span x-show="darkMode">â˜€ï¸</span>
                 </button>
                 <button @click="toggleLang()" class="mr-2">
                     <span x-text="lang === 'ar' ? 'EN' : 'AR'"></span>
                 </button>
            </div>
        </header>

        <main class="container mx-auto p-6 md:p-8 space-y-12">
            <!-- About & Philosophy Section -->
            <section data-aos="fade-up">
                <h2 class="text-3xl font-bold border-b-2 border-green-500 pb-2 mb-4">Ù†Ø¨Ø°Ø© Ø¹Ù†ÙŠ ÙˆØ±Ø¤ÙŠØªÙŠ Ø§Ù„ØªØ±Ø¨ÙˆÙŠØ©</h2>
                <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm">
                    <p class="text-gray-700 dark:text-gray-300 leading-relaxed" x-text="data.about.bio"></p>
                    <blockquote class="mt-4 border-r-4 border-green-500 pr-4 italic text-gray-600 dark:text-gray-400">
                        <p x-text="data.about.philosophy"></p>
                    </blockquote>
                </div>
            </section>
            
            <!-- All other 10 sections from the prompt will go here -->
            <!-- Example: KPI Section -->
            <section data-aos="fade-up">
                <h2 class="text-3xl font-bold border-b-2 border-green-500 pb-2 mb-4">Ù…Ø¤Ø´Ø±Ø§Øª Ø§Ù„Ø£Ø¯Ø§Ø¡ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</h2>
                 <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 text-center">
                    <template x-for="kpi in data.kpis" :key="kpi.id">
                        <div class="bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm">
                            <div class="text-4xl font-bold text-green-600" x-text="kpi.value + kpi.unit"></div>
                            <p class="text-sm text-gray-600 dark:text-gray-400 mt-2" x-text="kpi.label[lang]"></p>
                        </div>
                    </template>
                </div>
            </section>
            
            <!-- This is where you would add all the other sections (Career, Development, Awards, etc.) in the same way -->

        </main>
    </div>
</body>
</html>